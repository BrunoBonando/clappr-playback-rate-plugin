!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("clappr")):"function"==typeof define&&define.amd?define(["clappr"],t):"object"==typeof exports?exports.PlaybackRatePlugin=t(require("clappr")):e.PlaybackRatePlugin=t(e.clappr)}(this,function(e){return function(e){function t(n){if(a[n])return a[n].exports;var o=a[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var a={};return t.m=e,t.c=a,t.p="<%=baseUrl%>/",t(0)}([/*!******************!*\
  !*** ./index.js ***!
  \******************/
function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a(1),e.exports=t["default"]},/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e,t,a){for(var n=!0;n;){var o=e,l=t,r=a;n=!1,null===o&&(o=Function.prototype);var i=Object.getOwnPropertyDescriptor(o,l);if(void 0!==i){if("value"in i)return i.value;var c=i.get;if(void 0===c)return;return c.call(r)}var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=l,a=r,n=!0,i=s=void 0}},c=a(2),s=a(3),u=n(s),p=a(4),f=n(p),b=-1,d=function(e){function t(){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,e),r(t,[{key:"bindEvents",value:function(){this.listenTo(this.core.mediaControl,c.Events.MEDIACONTROL_CONTAINERCHANGED,this.reload),this.listenTo(this.core.mediaControl,c.Events.MEDIACONTROL_RENDERED,this.render)}},{key:"unBindEvents",value:function(){this.stopListening(this.core.mediaControl,c.Events.MEDIACONTROL_CONTAINERCHANGED),this.stopListening(this.core.mediaControl,c.Events.MEDIACONTROL_RENDERED)}},{key:"reload",value:function(){this.unBindEvents(),this.bindEvents()}},{key:"shouldRender",value:function(){if(!this.core.getCurrentContainer())return console.warn("playback rate plugin, no container"),!1;var e=this.core.getCurrentPlayback();return e?(console.warn("playback rate plugin",e),!0):(console.warn("playback rate plugin, no playback"),!1)}},{key:"render",value:function(){if(this.playbackRates=[{value:"0.5",label:"0.5x"},{value:"1.0",label:"1x"},{value:"2.0",label:"2x"}],this.shouldRender()){console.log("playback rate plugin rendering");var e=c.Styler.getStyleFor(f["default"],{baseUrl:this.core.options.baseUrl});console.log("style",e);try{console.log("trying html",u["default"]);var t=(0,c.template)(u["default"]);console.log("created template object",t);var a=t({playbackRates:this.playbackRates,title:this.getTitle()});console.log("rendered",a),this.$el.html(a),console.log("appended html")}catch(n){console.error(n)}this.$el.append(e),console.log("appended style"),console.log("this.$el",this.$el),console.log("this.el",this.el),this.core.mediaControl.$(".media-control-right-panel").append(this.el),console.log("appended element")}return this}},{key:"findLevelBy",value:function(e){var t;return this.levels.forEach(function(a){a.id===e&&(t=a)}),t}},{key:"changeLevelLabelBy",value:function(e,t){var a=this;this.levels.forEach(function(n,o){n.id===e&&(a.levels[o].label=t)})}},{key:"onRateSelect",value:function(e){var t=e.target.dataset.playbackRateSelect;return console.log("selected rate",t),this.core.$el.find("video").get(0).playbackRate=t,this.toggleContextMenu(),e.stopPropagation(),!1}},{key:"onShowMenu",value:function(e){this.toggleContextMenu()}},{key:"toggleContextMenu",value:function(){this.$(".playback_rate ul").toggle()}},{key:"setActiveListItem",value:function(e){console.log(this.$("a")),this.$("a").removeClass("active"),this.$('a[data-playback-rate-select="'+e+'"').addClass("active"),console.log(this.$("a"))}},{key:"buttonElement",value:function(){return this.$(".playback_rate button")}},{key:"getTitle",value:function(){return"1x"}},{key:"updateText",value:function(e){if(e===b){var t=this.core.getCurrentPlayback().currentLevel,a=(this.findLevelBy(t)||{}).label;a?this.buttonElement().text("AUTO ("+a+")"):this.buttonElement().text("AUTO")}else{var a=(this.findLevelBy(e)||{}).label;this.buttonElement().text(a)}this.setActiveListItem(e)}},{key:"name",get:function(){return"playback_rate"}},{key:"template",get:function(){console.log("html",u["default"]);try{return(0,c.template)(u["default"])}catch(e){console.error(e)}}},{key:"attributes",get:function(){return{"class":this.name,"data-playback-rate-select":""}}},{key:"events",get:function(){return{"click [data-playback-rate-select]":"onRateSelect","click [data-playback-rate-button]":"onShowMenu"}}}],[{key:"version",get:function(){return VERSION}}]),t}(c.UICorePlugin);t["default"]=d,e.exports=t["default"]},/*!*************************!*\
  !*** external "clappr" ***!
  \*************************/
function(t,a){t.exports=e},/*!************************************************!*\
  !*** ./src/public/playback-rate-selector.html ***!
  \************************************************/
function(e,t){e.exports='<button data-playback-rate-button>\n  <%= title %>\n</button>\n<ul>\n  <% for (var i = 0; i < playbackRates.length; i++) { %>\n    <li><a href="#" data-playback-rate-select="<%= playbackRates[i].value %>"><%= playbackRates[i].label %></a></li>\n  <% }; %>\n</ul>\n'},/*!*******************************!*\
  !*** ./src/public/style.scss ***!
  \*******************************/
function(e,t,a){t=e.exports=a(5)(),t.push([e.id,".playback_rate[data-playback-rate-select]{float:right;margin-top:5px;position:relative}.playback_rate[data-playback-rate-select] button{background-color:transparent;color:#fff;font-family:Roboto,Open Sans,Arial,sans-serif;-webkit-font-smoothing:antialiased;border:none;font-size:10px;cursor:pointer}.playback_rate[data-playback-rate-select] button:hover{color:#c9c9c9}.playback_rate[data-playback-rate-select] button.changing{-webkit-animation:pulse .5s infinite alternate}.playback_rate[data-playback-rate-select]>ul{display:none;list-style-type:none;position:absolute;bottom:25px;border:1px solid #000;border-radius:4px;background-color:rgba(0,0,0,.7)}.playback_rate[data-playback-rate-select] li{position:relative;font-size:10px}.playback_rate[data-playback-rate-select] li[data-title]{padding:5px}.playback_rate[data-playback-rate-select] li a{color:#aaa;padding:2px 10px 2px 15px;display:block;text-decoration:none}.playback_rate[data-playback-rate-select] li a.active{background-color:#000;font-weight:700;color:#fff}.playback_rate[data-playback-rate-select] li a.active:before{content:'\\2713';position:absolute;top:2px;left:4px}.playback_rate[data-playback-rate-select] li a:hover{color:#fff;text-decoration:none}@-webkit-keyframes pulse{0%{color:#fff}50%{color:#ff0101}to{color:#b80000}}",""])},/*!**************************************!*\
  !*** ./~/css-loader/lib/css-base.js ***!
  \**************************************/
function(e,t){"use strict";e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var a=this[t];a[2]?e.push("@media "+a[2]+"{"+a[1]+"}"):e.push(a[1])}return e.join("")},e.i=function(t,a){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var l=this[o][0];"number"==typeof l&&(n[l]=!0)}for(o=0;o<t.length;o++){var r=t[o];"number"==typeof r[0]&&n[r[0]]||(a&&!r[2]?r[2]=a:a&&(r[2]="("+r[2]+") and ("+a+")"),e.push(r))}},e}}])});
//# sourceMappingURL=clappr-playback-rate-plugin.min.js.map